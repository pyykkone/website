<html>
<head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://www.w3schools.com/lib/w3.js"></script>
<script src="filelist.json"></script>

<script>


function listPictures(files) { 

			for (var i=0;i<files.length;i++) {
				console.log('For-loop:'+i);
				
				var div1 = $('<div></div>').addClass('gallery')
					.mouseenter(function() {
						$('.selected').toggleClass('selected');	
						$(this).toggleClass('selected',1000);
						/*
						
						
						// NOT IN USE: Unselect all & make all tooltips hidden
						$('.selected').toggleClass('selected');	
						$('.tooltip').fadeOut('slow')//.css('visibility','hidden');
						
						// NOT IN USE: // Select this and make this tooltip visible
						$(this).toggleClass('selected',1000);
						$(this).children('.tooltip').fadeIn()//.css('visibility','visible');
						
						*/
						
				});
				
				if (files[i].indexOf('.html')>-1) {
					// Add html element
					//var imgToAdd = $().get(files[i]).css('height','60px').addClass('thumbnail').css('width','80px');
					/*
					$(function () {
						$.get(files[i], function (data) {
							$("#pictureList").append(data);
						});
					});
					*/
					
					
				} else {
						// Assumption that if not html then image
						var imgToAdd = $('<img src="'+files[i]+'">').css('height','60px').addClass('thumbnail').css('width','80px');
					
					imgToAdd.mouseenter(function() {
						
						$(this).trigger('selectPicture');
						return false; 
						//$('.picture').attr('src',$(this)[0].src);
						
					}).on('selectPicture',function() {
						
						$('.picture').hide();
						$('.picture').attr('src',$(this)[0].src);
						$('.picture').fadeIn('slow')
						return false; 
					});
					
					div1.append(imgToAdd)//.on('mouseout',function() {  $('.tooltip').css('visibility','hidden'); })  ;
					
					// Add a tooltip if wanted: 
					//div1.append('<p class="tooltip">' + files[i].split('current\\')[1] + '</p>');
					
					
					$('#pictureList').append(div1);
					} // End else 
			}

}



$(document).keydown(function(e) {
						if (e['keyCode']==40) { // Key down
							
							// If in image if selected
							if ($('.selected').length>0) {
								
								// Unselect current selected gallery-div and select the next gallery-div
								$('.selected').toggleClass('selected').next().toggleClass('selected');
								// Find the thumbnail in the selected gallery-div and print out the picture in it
								$('.selected').children('img').trigger('selectPicture');

							} else {
								// Select the first image if none is selected
								$('.gallery').first().toggleClass('selected').children('img').trigger('selectPicture');
								
							}
						}
						if (e['keyCode']==38) { // Key up
						
							if ($('.selected').length>0) {
								// Unselect the current class and find the previous sibling 
								$('.selected').toggleClass('selected').prev().toggleClass('selected')
								// Find the thumbnail in the selected gallery-div and print out the picture in it
								$('.selected').children('img').trigger('selectPicture');
							} else {
								// Select the first image if none is selected
								$('.gallery').last().toggleClass('selected').children('img').trigger('selectPicture');

							}
							
						}
						return false;
						
});


$(document).ready(function() {
    console.log( "ready!" );
	
	// And empty img-tag with picture class
	var imgToAdd = $('<img src=""></img>').addClass('picture')
	
	$('#pictureFrame').append(imgToAdd);
	
	
	listPictures(files);
	


	
});


</script>

<link rel="stylesheet" type="text/css" href="styles.css">


</head>
<body>

<div id='pictureFrame'></div>


<div id='pictureList'></div>


</body>
</html>

